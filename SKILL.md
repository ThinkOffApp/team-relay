---
name: ide-agent-kit
version: 0.2.0
description: Filesystem message bus and webhook relay for cross-IDE agent coordination
requires:
  bins: [node]
install:
  - kind: node
    package: ide-agent-kit
    bins: [ide-agent-kit]
---

# IDE Agent Kit

Filesystem-based message bus for cross-IDE agent coordination. Zero dependencies.

## Quick Start

```bash
npm install -g ide-agent-kit
ide-agent-kit init --ide claude-code
```

## Connectivity Modes

The kit supports four connectivity modes that compose freely:

### 1. Local Filesystem Bus (default)

Agents on the same machine communicate through a shared queue directory and append-only receipt log. No network, no server, no API keys. Works with any IDE that can read files.

- Queue: `./ide-agent-queue.jsonl`
- Receipts: `./ide-agent-receipts.jsonl`

### 2. Webhook Relay Server (optional)

Receives inbound webhooks from GitHub, GitLab, or any HTTP source and writes them to the local event queue.

```bash
ide-agent-kit serve [--config <path>]
```

Binds to `127.0.0.1:8787` by default. Configure `github.webhook_secret` to verify signatures.

### 3. Ant Farm Room Polling (optional)

Connects to Ant Farm rooms for cross-machine agent coordination. Requires an API key.

```bash
ide-agent-kit poll --rooms <room1,room2> --api-key <key> --handle <@handle> [--interval <sec>]
```

Rate-limit: best-effort polling, default 120s interval. Not a real-time transport.

### 4. GitHub Events (optional)

When `serve` is running, point a GitHub webhook at your relay URL. The server translates PR comments, issue events, and CI status into local queue events that your IDE agent can act on.

Configure in `ide-agent-kit.json`:
- `github.webhook_secret` — verify inbound signatures
- `github.event_kinds` — filter event types (default: `pull_request`, `issue_comment`)

## Commands

### Core

| Command | Description |
|---------|-------------|
| `serve [--config <path>]` | Start webhook relay server |
| `receipt tail [--n <count>]` | Print last N receipts |
| `watch [--config <path>]` | Watch event queue, nudge IDE session on new events |
| `emit --to <url> --json <file>` | POST a receipt/event JSON to a webhook target |
| `init [--ide <name>] [--profile <balanced\|low-friction>]` | Generate starter config |

### Agent Communication

| Command | Description |
|---------|-------------|
| `sessions send --agent <id> --message <text>` | Send message to agent via OpenClaw gateway |
| `sessions spawn --task <text> [--agent <id>]` | Spawn a new agent session |
| `sessions list [--kinds <types>] [--limit <n>]` | List active sessions |
| `sessions history --session-key <key>` | View session message history |
| `sessions status --session-key <key>` | Check session status |
| `gateway trigger --agent <id> --message <text>` | Trigger agent directly |
| `gateway health` | Check gateway health |
| `gateway agents` | List registered agents |

### Command Execution

| Command | Description |
|---------|-------------|
| `tmux run --cmd <command> [--session <name>]` | Run allowlisted command in tmux, capture output + receipt |
| `exec request --command <cmd>` | Request execution approval |
| `exec resolve --request-id <id> --decision <allow-once\|deny>` | Resolve approval request |
| `exec list [--status <pending\|resolved>]` | List approval requests |

### Agent Memory

| Command | Description |
|---------|-------------|
| `memory list` | List memory entries |
| `memory get --key <topic>` | Read a memory entry |
| `memory set --key <topic> --value <text>` | Write a memory entry |
| `memory search --query <text>` | Search memory (local or OpenClaw backend) |

### Scheduling & Hooks

| Command | Description |
|---------|-------------|
| `cron list` | List scheduled tasks |
| `cron add --name <n> --task <text> --schedule <expr>` | Add scheduled task |
| `hooks list` | List event hooks |
| `hooks create --name <n> --events <e1,e2> --webhook-url <url>` | Create webhook forwarder |

### Utility

| Command | Description |
|---------|-------------|
| `keepalive start` | Prevent macOS sleep for remote sessions |
| `keepalive stop` | Stop keepalive |
| `keepalive status` | Show keepalive state |

## Configuration

Generated by `ide-agent-kit init`. Key fields:

- `listen.port` — Webhook server port (default: 8787)
- `tmux.allow` — Allowlisted shell commands
- `tmux.ide_session` — IDE tmux session to nudge
- `openclaw.host/port/token` — Gateway connection (for `sessions` and `gateway` commands)
- `github.webhook_secret` — Verify inbound GitHub webhooks

## Data Access

| Path | Access | Purpose |
|------|--------|---------|
| `ide-agent-receipts.jsonl` | append | Audit log of all agent actions |
| `ide-agent-queue.jsonl` | read/write | Event queue |
| `ide-agent-kit.json` | read | Runtime configuration |

## License

AGPL-3.0-only
